# 第1章 好的推荐系统

## 什么是推荐系统
> &emsp;&emsp;推荐系统的任务就是联系用户和信息，一方面帮助用户发现对自己有价值的信息，另一方面让信息能够展现在对它感兴趣的用户面前，从而实现信息消费者和信息生产者的双赢。

&emsp;&emsp;其实推荐系统就是为了满足两方（信息消费者和信息生产者）的相关利益，使得利益最大化，达到双赢的目的。

> &emsp;&emsp;和搜索引擎一样，推荐系统也是一种帮助用户快速发现有用信息的工具。但不同的是，推荐系统不需要用户提供明确的需求，而是通过分析用户的历史行为给用户的兴趣建模，从而主动给用户推荐能够满足他们兴趣和需求的信息。

&emsp;&emsp;从上述描述来看，是不准确的，用户也要提供明确的需求，比如后面的用户调查，就需要对推荐系统的评估提供数据，从而量化成评价指标的数据。

## 个性化推荐系统的应用
### 电子商务
1. 推荐结果的标题、缩略图以及其他内容属性：告诉用户给他们推荐的是什么。
2. 推荐结果的平均分： 平均分反应了推荐结果的总体质量，也代表了大部分用户对这本书的看法。
3. 推荐理由：根据用户的历史行为给用户做推荐。

&emsp;&emsp;亚马逊采用了基于物品的推荐算法，该算法给用户推荐那些和他们之前喜欢的物品相似的物品。还有另一种推荐算法，就是按照用户在Facebook的好友关系，给用户推荐他们的好友在亚马逊上喜欢的物品。    
 
### 电影和视频网站
&emsp;&emsp; Netflix的推荐结果包括：电影的标题和海报、用户反馈模块（包括Play、评分和Not Interested）、推荐理由。  
&emsp;&emsp;Netflix的推荐算法，也是基于物品的推荐算法，即给用户推荐和他们曾经喜欢过的相似的电影。

### 个性化音乐网络电台
&emsp;&emsp;Pandora的音乐推荐算法主要来自于一个叫做音乐基因工程的项目——基于内容的推荐算法。音乐家和研究人员亲自听了上万首不同歌手的歌，然后对歌曲的不同特性（比如旋律、节奏、编曲和歌词等）进行标注（**数据标注**），这些标注被称为音乐的基因。之后，根据标注的基因计算歌曲的相似度，并给用户推荐和他之前喜欢的音乐在基因上相似的其他音乐。（**基于内容的相似度推荐算法**）  

### 社交网络
其主要应用：
1. 利用用户的社交网络信息对用户进行个性化的物品推荐。
2. 信息流的会话推荐
3. 给用户推荐好友

&emsp;&emsp;Facebook有一个推荐API，称为Instant Personalization。该工具根据用户好友喜欢的信息，给他们推荐他们的好友最喜欢的物品。（**协同算法**）

### 个性化阅读
> &emsp;&emsp;Google Reader允许用户关注自己感兴趣的人，然后看到所关注用户分享的文章。

&emsp;&emsp;和GitHub很类似，通过Follow就可以进行关注。  
&emsp;&emsp;Zite收集用户对文章的偏好信息，在每篇文章右侧，Zite都允许用户给出喜欢或不喜欢的反馈，然后通过分析用户的反馈数据，不停地更新用户的个性化文章列表。

### 个性化广告
目前的个性化广告投放技术主要分为3种：
1. 上下文广告：通过分析用户正在浏览的网页内容，投放和网页内容相关的广告。
2. 搜索广告：通过分析用户在当前会话中的搜索记录，判断用户的搜索目的，投放和用户目的相关的广告。
3. 个性化展示广告：根据用户的兴趣，对不同用户投放不同的展示广告。

## 推荐系统评测
> 好的推荐系统设计，能够让推荐系统本身收集到高质量的用户反馈，不断完善推荐的质量，增加用户和网站的交互，提高网站的收入。

### 推荐系统实验方法
#### 离线实验
**步骤：**  
1. 通过日志系统获取用户行为数据，并按照一定格式生成一个标准的数据集；  
2. 将数据集按照一定的规则分成训练集和测试集；  
3. 在训练集上训练用户兴趣模型，在测试集上进行预测；  
4. 通过事先定义的离线指标评测算法在测试集上的预测结果。  
**优点：**  
1. 不需要有实际系统的控制权
2. 不需要用户参与实验
3. 速度快，可以测试大量算法
**缺点：**  
1. 无法计算商业上关心的指标
2. 离线实验的指标和商业指标存在差距

#### 用户调查
**优点：**  
&emsp;&emsp;可以获得很多体现用户主观感受的指标，相对在线实验风险很低，出现错误后很容易弥补。  
**缺点：**  
&emsp;&emsp;招募测试用户代价较大，很难组织大规模的测试用户，因此会使测试结果的统计意义不足。

#### 在线实验
&emsp;&emsp;将推荐系统上线做AB测试，将它和旧的算法进行比较。  

&emsp;&emsp;一个新的推荐算法最终上线，需要完成3个实验：
1. 需要通过离线实验证明它在很多离线指标上优于现有的算法。
2. 需要通过用户调查确定它的用户满意度不低于现有的算法。
3. 通过在线的AB测试确定它在我们关心的指标上优于现有的算法。

### 评测指标
1. 用户满意度
&emsp;&emsp;只能通过用户调查或者在线实验获得。可以用点击率、用户停留时间和转化率等指标度量用户的满意度。
2. 预测准确率
&emsp;&emsp;通过用户对物品的历史评分，就可以从中习得用户的兴趣模型，并预测该用户在将来看到一个没有评过分的物品时，会给这个物品评多少分。
$$RMSE=\sqrt{\frac{\sum_{u,i \in T}(r_{ui}-\hat{r}_{ui})^2}{|T|}} \\
MAE=\frac{\sum_{u,i \in T}\left |r_{ui}-\hat{r}_{ui}\right |}{|T|} \\
Recall=\frac{\sum_{u \in U}\left |R(u) \cap T(u)\right |}{\sum_{u \in U} |T(u)|} \\
Precision=\frac{\sum_{u \in U}\left  | R(u) \cap T(u) \right |}{\sum_{u \in U} |R(u)|}$$
3. 覆盖率
&emsp;&emsp;覆盖率描述一个推荐系统对物品长尾的发掘能力，方法定义为推荐系统能够推荐出来的物品占物品集合的比例。
$$Coverage=\frac{U_{u \in U}R(u)}{|I|}$$


